Load Libraries
```{r}
library(ggplot2)
library(magrittr)
library(dplyr)
library(ggbeeswarm)
library(broom)
library(ggpubr)
library(patchwork)
library(data.table)
library(EpiDISH)
library(readr)
library(data.table)
library(ISLR)
library(caret)
library(glmnet)
```

Load Files
```{r}
patient_info <- '/Users/hugohudson/Desktop/Lab/GSE74193_GEO_procData.csv'
betastuff <- '/Users/hugohudson/Downloads/gb-2013-14-10-r115-S3.csv'
in_depth_patient_info <- '/Users/hugohudson/Desktop/Lab/GSE74193_series_matrix.csv'

col_names <- names(fread(patient_info, nrows = 0))
beta_columns <- col_names[grepl("Beta", col_names)]
methylation_df <- fread(patient_info, select = beta_columns)
col_names <- colnames(methylation_df)
patient_df <- read.csv(in_depth_patient_info)
```

Gather information from files
```{r}
group_info <- patient_df[34, 1:ncol(patient_df)]
control_columns <- col_names[grepl("Control", group_info)]
control_df <- select(methylation_df, na.omit(control_columns))
positive_columns <- col_names[grepl("Schizo", group_info)]
positive_df <- select(methylation_df, na.omit(positive_columns))

# Get ages
age_full <- patient_df[49, 1:ncol(patient_df)]
control_ages <- age_full[grepl("Control", group_info)]
positive_ages <- age_full[grepl("Schizo", group_info)]
```

Elastic Net Regression
```{r}
cv_5 <- trainControl(method = "cv", number = 5)
elnetControl <- train(V1 ~ .,
  data = cbind(transpose(control_df), control_ages),
  method = "glmnet",
  trControl = cv_5
)

elnetPositive <- train(V1 ~ .,
  data = cbind(transpose(positive_df), positive_ages),
  method = "glmnet",
  trControl = cv_5
)
elnetControl
```
Diagnosis Specific Probes
```{r}

```

Ancestry Information
```{r}

```

Elastic Net Regression for Ancestry
```{r}
#Methylation
ancestryInfo <- patient_df[34, 1:ncol(patient_df)]
group1Columns <- col_names[grepl("Control", ancestryInfo)]
group1df <- select(methylation_df, na.omit(control_columns))
group2Columns <- col_names[grepl("Schizo", ancestryInfo)]
group2df <- select(methylation_df, na.omit(positive_columns))

#Age
group1Ages <- age_full[grepl("Control", race_info)]
group2Ages <- age_full[grepl("Schizo", race_info)]
```

Ancestry Specific Probes
```{r}

```

